<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="https://blm-fsmvu.github.io/305/images/icon192.png">
    <style>
        body { max-width: 500px; }
        #button { width: 90%; }
    </style>
</head>
<script>
"use strict";
var fetchedText;
function readText() {
	 var text;
    fetch(urlInput.value)
      .then(response => response.text())	
	  .then(getText);
}
function getText(txt){
fetchedText = txt;
}
function fileSelect(t) { 
	var readedText = readText()
	var isFind=false;
	setTimeout(function(){
	var findedFileName;
	function readFile(index) {
    if( index > t.files.length-1 ){
	return;
	} 	
	var reader =  new FileReader();
	var file = t.files[index];
	reader.onload = function(e) { 
	var fetchedText = document.getElementById("fetchedText");  
	var localText = document.getElementById("localText");  
	var localText = e.target.result;
	if(localText.replace(/\s/g,'#')==fetchedText.replace(/\s/g, '#')){
	isFind=true;
	findedFileName = file.name;
	out.innerText = t.files.length + " items checked, "+ file.name + " has the same  text, given url";	
	}
    readFile(index+1);
    }
    reader.readAsText(file);
  }
readFile(0);

}, 90);

if(isFind==false){
	out.innerText = t.files.length + " items checked, all files are different ";
}
}
</script>

<body>
<h2 id=title></h2>
<p><b id="docName">Remote and Local Files</b> &nbsp; <a href="https://blm-fsmvu.github.io/305/work/Reading_files">Reference</a>
<p><input id=urlInput value="https://ibrahimtarla.github.io/Advanced_Programming_With_Java_Script/CW6/CW6_2.PNG" style="width: 330px" ></p>
<input type=file id=button onChange='fileSelect(this)' multiple />
<p>
<pre id=out></output>
	<hr>
	<b>Sample code</b>
	<pre
	  id="sample">function fileSelect() {<br>//write your code here<br>}<br>function readText() {<br>//write your code here<br>}</pre>
  
	<hr>

</p>


<script>
    title.innerText = document.title;
    sample.innerText = fileSelect+"\n"+readText
</script>

</body>
</html>
